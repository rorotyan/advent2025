<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ„ Advent Calendar ğŸ</title>

<!-- æ‰‹æ›¸ãé¢¨ãƒ•ã‚©ãƒ³ãƒˆ -->
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Patrick Hand', sans-serif;
  color: #fff;
  overflow-x: hidden;
  background: url('images/background-night-city.jpg') no-repeat center center fixed;
  background-size: cover;
  position: relative;
}

/* ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”»é¢ */
#passwordScreen {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 100;
  color: #fff;
}
#passwordScreen input {
  font-family: 'Patrick Hand', sans-serif;
  font-size: 18px;
  padding: 10px;
  margin-top: 10px;
  border-radius: 8px;
  border: none;
  outline: none;
}
#passwordScreen button {
  margin-top: 10px;
  padding: 10px 20px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background:#388e3c;
  color:#fff;
  font-family: 'Patrick Hand', sans-serif;
}
#passwordScreen button:hover { background:#2e7d32; }

/* å‹•ç”»ç”»é¢ */
#videoScreen {
  display:none;
  position: fixed;
  inset: 0;
  background: #000;
  justify-content: center;
  align-items: center;
  z-index: 90;
}

/* ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.2);
  z-index: 0;
}

/* ã‚¿ã‚¤ãƒˆãƒ« */
.header {
  text-align: center;
  margin: 40px 0 20px 0;
  font-size: 36px;
  text-shadow: 0 0 5px #fff, 0 0 10px #ff0, 0 0 20px #f00;
  animation: glow 2s infinite alternate;
  position: relative;
  z-index: 2;
}
@keyframes glow {
  0%{ text-shadow: 0 0 5px #fff, 0 0 10px #ff0; }
  100%{ text-shadow: 0 0 10px #fff, 0 0 20px #ff0, 0 0 30px #f00; }
}

/* é›ª */
@keyframes snow { 0%{ transform: translateY(0); opacity:1;} 100%{transform:translateY(100vh);opacity:0;} }
.snowflake { position: fixed; top:-10px; color:white; opacity:0.9; font-size:22px; animation:snow linear infinite; pointer-events:none; }

/* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆ7åˆ—ï¼‰ */
.calendar {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 5px;
  padding: 10px;
  max-width: 90vw;
  margin: 0 auto 60px auto;
  position: relative;
  z-index: 2;
  display:none; /* æœ€åˆã¯éè¡¨ç¤º */
}

/* æ‰‰ãƒœã‚¿ãƒ³ */
.door {
  background:#fff;
  border-radius:8px;
  text-align:center;
  font-size:16px;
  padding:15px 0;
  box-shadow:0 3px 0 #ccc;
  cursor:pointer;
  transition: transform 0.3s, background 0.3s;
  position: relative;
}
.door:hover { transform: scale(1.05) rotateZ(-1deg); background:#f0f0f0; } /* æ‰‹æ›¸ãé¢¨è»½ãå‚¾ã */
.locked { background:#eee; cursor:not-allowed; opacity:0.6; }

/* æ—¥ä»˜æ–‡å­—è‰² */
.door.weekday { color: #000; }
.door.saturday { color: #1976d2; }
.door.sunday { color: #d32f2f; }

/* æ‰‰é–‹ãã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.door.open::after {
  content:'';
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(255,255,255,0.1);
  transform-origin:left center;
  animation:flip 0.4s forwards;
  pointer-events: none;
}
@keyframes flip { 0%{transform:rotateY(0deg);} 100%{transform:rotateY(180deg);} }

/* ãƒ¢ãƒ¼ãƒ€ãƒ« */
.modal {
  display:none;
  position:fixed;
  z-index:50;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.8);
  justify-content:center;
  align-items:center;
  flex-direction:column;
}
.modal-content {
  background: url('images/paper-bg.png') no-repeat center center/cover;
  color: #333;
  border-radius: 16px;
  padding: 30px 25px;
  text-align: left;
  width: 90%;
  max-width: 450px;
  box-shadow: 0 5px 25px rgba(0,0,0,0.4);
  overflow-y: auto;
  max-height: 80%;
  font-family: 'Patrick Hand', 'Comic Sans MS', cursive, sans-serif;
  line-height: 1.8em;
  font-size: 18px;
}
.modal-content p { margin:10px 0; }
.modal-content a { color:#c62828; text-decoration:none; }
.modal-content a:hover { text-decoration:underline; }

/* ã‚®ãƒ£ãƒ©ãƒªãƒ¼ */
.gallery { display:flex; overflow-x:auto; gap:10px; margin-top:10px; }
.gallery img { border-radius:8px; height:120px; }

/* é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ */
.close-btn {
  margin-top:15px;
  background:#388e3c;
  color:#fff;
  padding:10px 20px;
  border-radius:8px;
  border:none;
  cursor:pointer;
}
.close-btn:hover { background:#2e7d32; }
</style>
</head>
<body>

<!-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç”»é¢ -->
<div id="passwordScreen">
  <h2>ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</h2>
  <input type="password" id="passwordInput" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
  <button onclick="checkPassword()">OK</button>
  <p id="passwordError" style="color:#ff6666;margin-top:10px;display:none;">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™</p>
</div>

<!-- å‹•ç”»ç”»é¢ -->
<div id="videoScreen">
  <video id="introVideo" src="intro.mp4" autoplay muted playsinline></video>
</div>

<div class="overlay"></div>
<div class="header">ğŸ„ Advent Calendar ğŸ</div>

<!-- BGM -->
<audio id="bgm" loop>
  <source src="bgm.mp3" type="audio/mpeg">
</audio>

<!-- é›ª -->
<script>
for(let i=0;i<30;i++){
  let s=document.createElement('div');
  s.className='snowflake';
  s.innerHTML='â„';
  s.style.left=Math.random()*100+'vw';
  s.style.animationDuration=(5+Math.random()*5)+'s';
  s.style.fontSize=(15+Math.random()*15)+'px';
  document.body.appendChild(s);
}
</script>

<!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
<div class="calendar" id="calendar"></div>

<!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="modal" class="modal">
  <div class="modal-content" id="modalContent"></div>
  <button class="close-btn" onclick="closeModal()">é–‰ã˜ã‚‹</button>
</div>

<script>
// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹
const messages = {
1:{text:"ã³ã£ãã‚Šã—ãŸï¼Ÿ<br>ä½•ã‹é¢ç™½ã„ã“ã¨ã§ããªã„ã‹ãªã¨æ€ã£ã¦ã€ã¡ã¾ã¡ã¾ã“ã‚“ãªã®ç”¨æ„ã—ã¦ãŸã€‚", img:["images/day1.jpg","images/day1-2.jpg"]},
2:{text:"2æ—¥ç›®ï¼šä»Šæ—¥ã‚‚ã‚ãªãŸãŒç¬‘ã£ã¦ã¾ã™ã‚ˆã†ã« â˜ºï¸", img:["images/day2.jpg"]},
3:{text:"3æ—¥ç›®ï¼šã“ã®ãƒªãƒ³ã‚¯ã‚’è¦‹ã¦ã­ â†’", link:"https://example.com"},
4:{text:"4æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
5:{text:"5æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
6:{text:"6æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
7:{text:"7æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
8:{text:"8æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
9:{text:"9æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
10:{text:"10æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
11:{text:"11æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
12:{text:"12æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
13:{text:"13æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
14:{text:"14æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
15:{text:"15æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
16:{text:"16æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
17:{text:"17æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
18:{text:"18æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
19:{text:"19æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
20:{text:"20æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
21:{text:"21æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
22:{text:"22æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
23:{text:"23æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
24:{text:"24æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]},
25:{text:"25æ—¥ç›®:ãƒ¡ãƒªãƒ¼ã‚¯ãƒªã‚¹ãƒã‚¹ã€‚<br>ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’é–‹ã‘ã¦ãã ã•ã„ã€‚", link:"https://example.com"}
};

// ä»Šæ—¥ã®æ—¥ä»˜
const today = new Date().getDate();
const calendar = document.getElementById('calendar');

// BGMåˆ¶å¾¡
const bgm = document.getElementById('bgm');
let bgmStarted = false;

// BGMã‚’æœ€åˆã®ã‚¯ãƒªãƒƒã‚¯ã§æœ‰åŠ¹åŒ–ï¼ˆã‚¹ãƒãƒ›å¯¾å¿œï¼‰
document.body.addEventListener('click', () => {
  if(!bgmStarted){
    bgm.play().catch(()=>{});
    bgmStarted = true;
  }
}, { once: true });

// æ‰‰ç”Ÿæˆ
function showCalendar(){
  for(let i=1;i<=25;i++){
    const door = document.createElement('div');
    door.className='door';
    door.textContent=i;

    let weekday = (i-1) % 7;
    if(weekday === 5) door.classList.add('sunday');
    else if(weekday === 6) door.classList.add('saturday');
    else door.classList.add('weekday');

    if(i>today){ door.classList.add('locked'); }
    else{ door.onclick=()=>openModal(i,door); }

    calendar.appendChild(door);
  }
  calendar.style.display='grid';
}

// ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯
function checkPassword(){
  const input = document.getElementById('passwordInput').value;
  if(input === "toyroom"){
    document.getElementById('passwordScreen').style.display='none';
    playVideo();
  } else{
    document.getElementById('passwordError').style.display='block';
    document.getElementById('passwordInput').value='';
  }
}

// å‹•ç”»å†ç”Ÿ
function playVideo(){
  const videoScreen = document.getElementById('videoScreen');
  const video = document.getElementById('introVideo');
  videoScreen.style.display='flex';
  video.play();
  video.onended = () => {
    videoScreen.style.display='none';
    showCalendar();
  };
}

// ãƒ¢ãƒ¼ãƒ€ãƒ«é–‹ã
function openModal(day,door){
  if(!bgmStarted){ bgm.play().catch(()=>{}); bgmStarted=true; }
  door.classList.add('open');

  const data = messages[day];
  const modal = document.getElementById('modal');
  const content = document.getElementById('modalContent');

  if(!data){
    content.innerHTML=`<p>ã“ã®æ—¥ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã¾ã ç§˜å¯†ã§ã™ğŸ„</p>`;
  }else{
    let html=`<p>${data.text}</p>`;
    if(data.img){
      html+=`<div class="gallery">`;
      data.img.forEach(src=>{ html+=`<img src="${src}">`; });
      html+=`</div>`;
    }
    if(data.link) html+=`<p><a href="${data.link}" target="_blank">ğŸ</a></p>`;
    content.innerHTML=html;
  }

  modal.style.display='flex';
}

// ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
function closeModal(){ document.getElementById('modal').style.display='none'; }
</script>
</body>
</html>
