<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ„ Advent Calendar for You ğŸ</title>

<!-- æ‰‹æ›¸ãé¢¨ãƒ•ã‚©ãƒ³ãƒˆ -->
<link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">

<style>
body {
  margin: 0;
  font-family: 'Patrick Hand', sans-serif;
  color: #fff;
  overflow-x: hidden;
  background: url('images/background-night-city.jpg') no-repeat center center fixed;
  background-size: cover;
  position: relative;
}

/* ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.2);
  z-index: 0;
}

/* ã‚¿ã‚¤ãƒˆãƒ« */
.header {
  text-align: center;
  margin: 40px 0 20px 0;
  font-size: 36px;
  text-shadow: 0 0 5px #fff, 0 0 10px #ff0, 0 0 20px #f00;
  animation: glow 2s infinite alternate;
  position: relative;
  z-index: 2;
}
@keyframes glow {
  0%{ text-shadow: 0 0 5px #fff, 0 0 10px #ff0; }
  100%{ text-shadow: 0 0 10px #fff, 0 0 20px #ff0, 0 0 30px #f00; }
}

/* é›ª */
@keyframes snow { 0%{ transform: translateY(0); opacity:1;} 100%{transform:translateY(100vh);opacity:0;} }
.snowflake { position: fixed; top:-10px; color:white; opacity:0.9; font-size:22px; animation:snow linear infinite; pointer-events:none; }

/* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼ˆ7åˆ—ï¼‰ */
.calendar {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 5px;
  padding: 10px;
  max-width: 350px;
  margin: 0 auto 60px auto;
  position: relative;
  z-index: 2;
}

/* æ‰‰ãƒœã‚¿ãƒ³ */
.door {
  background:#fff; /* ç™½èƒŒæ™¯ */
  border-radius:8px;
  text-align:center;
  font-size:16px;
  padding:15px 0;
  box-shadow:0 3px 0 #ccc;
  cursor:pointer;
  transition: transform 0.3s, background 0.3s;
  position: relative;
}
.door:hover { transform: scale(1.05); background:#f0f0f0; }
.locked { background:#eee; cursor:not-allowed; opacity:0.6; }

/* æ—¥ä»˜æ–‡å­—è‰² */
.door.weekday { color: #000; }   /* å¹³æ—¥é»’ */
.door.saturday { color: #1976d2; } /* åœŸæ›œæ—¥é’ */
.door.sunday { color: #d32f2f; }   /* æ—¥æ›œæ—¥èµ¤ */

.door.open::after { content:''; position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.1); transform-origin:left center; animation:flip 0.4s forwards; }
@keyframes flip { 0%{transform:rotateY(0deg);} 100%{transform:rotateY(180deg);} }

/* ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆä¾¿ç®‹é¢¨ï¼‰ */
.modal { display:none; position:fixed; z-index:50; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.8); justify-content:center; align-items:center; flex-direction:column; }
.modal-content { background:url('images/paper-bg.png') no-repeat center center/cover; color:#333; border-radius:12px; padding:20px; text-align:left; width:90%; max-width:400px; box-shadow:0 5px 20px rgba(0,0,0,0.3); overflow-y:auto; max-height:80%; font-family:'Patrick Hand', sans-serif; line-height:1.5em; }
.modal-content p { margin:10px 0; }
.modal-content a { color:#c62828; text-decoration:none; }
.modal-content a:hover { text-decoration:underline; }

/* ã‚®ãƒ£ãƒ©ãƒªãƒ¼ */
.gallery { display:flex; overflow-x:auto; gap:10px; margin-top:10px; }
.gallery img { border-radius:8px; height:120px; }

/* é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ */
.close-btn { margin-top:15px; background:#388e3c; color:#fff; padding:10px 20px; border-radius:8px; border:none; cursor:pointer; }
.close-btn:hover { background:#2e7d32; }
</style>
</head>
<body>

<div class="overlay"></div>
<div class="header">ğŸ„ Advent Calendar for You ğŸ</div>

<!-- BGM -->
<audio id="bgm" loop>
  <source src="bgm.mp3" type="audio/mpeg">
</audio>

<!-- é›ª -->
<script>
for(let i=0;i<30;i++){
  let s=document.createElement('div');
  s.className='snowflake';
  s.innerHTML='â„';
  s.style.left=Math.random()*100+'vw';
  s.style.animationDuration=(5+Math.random()*5)+'s';
  s.style.fontSize=(15+Math.random()*15)+'px';
  document.body.appendChild(s);
}
</script>

<!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
<div class="calendar" id="calendar"></div>

<!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="modal" class="modal">
  <div class="modal-content" id="modalContent"></div>
  <button class="close-btn" onclick="closeModal()">é–‰ã˜ã‚‹</button>
</div>

<script>
// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹
const messages = {
1:{text:"ğŸ 1æ—¥ç›®ï¼šã‚ãªãŸã«å‡ºä¼šãˆãŸå¥‡è·¡ã«æ„Ÿè¬ã—ã¦ã‚‹ã‚ˆ ğŸ’•", img:["images/day1.jpg","images/day1-2.jpg"]},
2:{text:"ğŸŒŸ 2æ—¥ç›®ï¼šä»Šæ—¥ã‚‚ã‚ãªãŸãŒç¬‘ã£ã¦ã¾ã™ã‚ˆã†ã« â˜ºï¸", img:["images/day2.jpg"]},
3:{text:"ğŸ’Œ 3æ—¥ç›®ï¼šã“ã®ãƒªãƒ³ã‚¯ã‚’è¦‹ã¦ã­ â†’", link:"https://example.com"},
4:{text:"ğŸ… 4æ—¥ç›®ï¼šã‚¯ãƒªã‚¹ãƒã‚¹ã¾ã§ã‚ã¨å°‘ã—ï¼", img:["images/day4.jpg"]}
};

// ä»Šæ—¥ã®æ—¥ä»˜
const today = new Date().getDate();
const calendar = document.getElementById('calendar');

// BGMåˆ¶å¾¡
const bgm = document.getElementById('bgm');
let bgmStarted = false;

// æ‰‰ç”Ÿæˆï¼ˆæ›œæ—¥åˆ¥è‰²åˆ†ã‘ï¼‰
for(let i=1;i<=25;i++){
  const door = document.createElement('div');
  door.className='door';
  door.textContent=i;

  // æ›œæ—¥åˆ¤å®šï¼ˆ1æ—¥ã‚’æ—¥æ›œã¨ã—ã¦è¨ˆç®—ä¾‹ï¼‰
  let weekday = (i-1) % 7; // 0:æ—¥æ›œ, 6:åœŸæ›œ
  if(weekday === 5) door.classList.add('sunday');
  else if(weekday === 6) door.classList.add('saturday');
  else door.classList.add('weekday');

  if(i>today){ door.classList.add('locked'); }
  else{ door.onclick=()=>openModal(i,door); }

  calendar.appendChild(door);
}

// ãƒ¢ãƒ¼ãƒ€ãƒ«é–‹ã
function openModal(day,door){
  if(!bgmStarted){ bgm.play().catch(()=>{}); bgmStarted=true; }
  door.classList.add('open');

  const data = messages[day];
  const modal = document.getElementById('modal');
  const content = document.getElementById('modalContent');

  if(!data){
    content.innerHTML=`<p>ã“ã®æ—¥ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã¾ã ç§˜å¯†ã§ã™ğŸ„</p>`;
  }else{
    let html=`<p>${data.text}</p>`;
    if(data.img){
      html+=`<div class="gallery">`;
      data.img.forEach(src=>{ html+=`<img src="${src}">`; });
      html+=`</div>`;
    }
    if(data.link) html+=`<p><a href="${data.link}" target="_blank">ã“ã¡ã‚‰ã¸ğŸ’Œ</a></p>`;
    content.innerHTML=html;
  }

  modal.style.display='flex';
}

// ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
function closeModal(){ document.getElementById('modal').style.display='none'; }
</script>
</body>
</html>
